/*!
	Scripts: silverstripe-announcements module
	Author: Andrew Haine
	Website: http://www.andrewhaine.co.uk
	Contact: hello@andrewhaine.co.uk
*/
"use strict";var pushPage={pagePunch:0,allMessages:document.querySelectorAll(".ss_announcement__takes-space--1"),getHeights:function(e){for(var t=0;t<e.length;t++){var n=e[t].clientHeight;this.pagePunch+=parseInt(n,10),t>0&&(e[t-1].style.top=n+"px")}},updatePadding:function(e){this.pagePunch=0,this.getHeights(e),document.body.setAttribute("style","padding-top: "+pushPage.pagePunch+"px")},init:function(){var e=this;setTimeout(function(){document.body.classList.add("ss_announcements__body--animatable")},400),this.updatePadding(pushPage.allMessages),window.onresize=function(){e.updatePadding(pushPage.allMessages)}}},announcementCookie={allSiteAnnouncements:document.querySelectorAll(".ss_announcement__message-outer"),getCookie:function(){for(var e=document.cookie,t=e.split(";"),n=0;n<t.length;n++)if(t[n].includes("ssAnnouncementCookie"))return t[n].split("=")[1]},setCookie:function(e){if(this.getCookie()){var t=this.getCookie(),n=t.split(",");n.push(String(e));var s=n.join(",");document.cookie="ssAnnouncementCookie="+s+"; path=/"}else document.cookie="ssAnnouncementCookie="+String(e)+"; path=/"},removeHiddenClass:function(e){e.classList.remove("ss_announcement--hidden")},removeMessageOnInit:function(){if(announcementCookie.getCookie())for(var e=announcementCookie.getCookie(),t=e.split(","),n=0;n<t.length;n++){var s=document.getElementById(t[n]);s&&s.parentNode.removeChild(s)}for(var o=0;o<announcementCookie.allSiteAnnouncements.length;o++)this.allSiteAnnouncements[o].classList.remove("ss_announcement--hidden")}},messageAction={findMessageOuter:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ss_announcement__message-outer";(e=e.parentElement)&&!e.classList.contains(t););return e},closeMessage:function(e){var t=messageAction.findMessageOuter(e);announcementCookie.setCookie(t.id),t.classList.add("ss_announcement__animating-out"),setTimeout(function(){t.parentNode.removeChild(t),pushPage.updatePadding(pushPage.allMessages)},400),messageStacking.updateStacking()}},messageStacking={allSiteMessages:document.querySelectorAll(".ss_announcement__message-outer"),messagePositions:function(){for(var e={topRight:[],topLeft:[],bottomRight:[],bottomLeft:[]},t=0;t<this.allSiteMessages.length;t++)for(var n=this.allSiteMessages[t].classList,s=0;s<n.length;s++)if(n[s].includes("ss_announcement-position")){if(null===document.getElementById(this.allSiteMessages[t].id))return;var o=n[s].split("--")[1];switch(o){case"top-right":e.topRight.push(this.allSiteMessages[t].id);break;case"top-left":e.topLeft.push(this.allSiteMessages[t].id);break;case"bottom-right":e.bottomRight.push(this.allSiteMessages[t].id);break;case"bottom-left":e.bottomLeft.push(this.allSiteMessages[t].id)}}return e},updateStacking:function(){var e=this.messagePositions();for(var t in e)if("t"==t[0])for(var n=0;n<e[t].length;n++){var s=e[t][n],o=document.getElementById(s),i=document.getElementById(e[t][n-1]);if(i){var a=parseInt(i.clientHeight),u=parseInt(window.getComputedStyle(i,null).getPropertyValue("top")),l=(parseInt(15),a+u+24);console.log(u),o.style.top=l+"px"}}}};announcementCookie.removeMessageOnInit(),pushPage.init(),messageStacking.updateStacking();