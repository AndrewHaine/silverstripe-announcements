/*!
	Scripts: silverstripe-announcements module
	Author: Andrew Haine
	Website: http://www.andrewhaine.co.uk
	Contact: hello@andrewhaine.co.uk
*/
"use strict";var pushPage={pagePunch:0,allMessages:document.querySelectorAll(".ss_announcement__takes-space--1"),getHeights:function(e){for(var n=0;n<e.length;n++){var t=e[n].clientHeight;pushPage.pagePunch+=parseInt(t,10),n>0&&(e[n-1].style.top=t+"px")}},updatePadding:function(e){pushPage.pagePunch=0,pushPage.getHeights(e),document.body.setAttribute("style","padding-top: "+pushPage.pagePunch+"px")},init:function(){setTimeout(function(){document.body.classList.add("ss_announcements__body--animatable")},400),pushPage.updatePadding(pushPage.allMessages),window.onresize=function(){pushPage.updatePadding(pushPage.allMessages)}}},announcementCookie={allSiteAnnouncements:document.querySelectorAll(".ss_announcement__message-outer"),getCookie:function(){for(var e=document.cookie,n=e.split(";"),t=0;t<n.length;t++)if(n[t].includes("ssAnnouncementCookie"))return n[t].split("=")[1]},setCookie:function(e){if(document.cookie){var n=announcementCookie.getCookie(),t=n.split(",");t.push(String(e));var o=t.join(",");document.cookie="ssAnnouncementCookie="+o+"; path=/"}else document.cookie="ssAnnouncementCookie="+String(e)+"; path=/"},removeHiddenClass:function(e){e.classList.remove("ss_announcement--hidden")},removeMessageOnInit:function(){if(document.cookie)for(var e=announcementCookie.getCookie(),n=e.split(","),t=0;t<n.length;t++){var o=document.getElementById(n[t]);o&&o.parentNode.removeChild(o)}for(var s=0;s<announcementCookie.allSiteAnnouncements.length;s++)announcementCookie.allSiteAnnouncements[s].classList.remove("ss_announcement--hidden")}},messageAction={findMessageOuter:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ss_announcement__message-outer";(e=e.parentElement)&&!e.classList.contains(n););return e},closeMessage:function(e){var n=messageAction.findMessageOuter(e);announcementCookie.setCookie(n.id),n.classList.add("ss_announcement__animating-out"),setTimeout(function(){n.parentNode.removeChild(n),pushPage.updatePadding(pushPage.allMessages)},400)}};announcementCookie.removeMessageOnInit(),pushPage.init();